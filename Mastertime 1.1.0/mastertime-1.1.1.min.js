/*!
 * masterTime JavaScript Library v1.1.1
 * https://github.com/aykutkardas/mastertime/
 *
 * Author: Aykut KARDAÅž
 * Released under the MIT license
 *
 * Date: 2017-08-07T12:21Z
 */
 
var MT=MT||{};String.prototype.MTformat=function(){for(var t=this,e=arguments,n=0;n<e.length;n++){var o=["t","k","a"];e[n]&&(t=t.replace("{"+o[n]+"}",e[n]))}return t},MT.times=[],MT.start=[],MT.work=[],MT.name=[],MT.targets=document.querySelectorAll("*[mt-time], *[mt-ago]"),MT.collect=function(t){var e=MT.targets[t],n=function(t){return e.getAttribute("mt-"+t)};MT.times.push({target:e,name:n("name")||t,time:Number(n("time")),way:n("way"),show:n("show"),start:n("start"),complete:n("complete"),interval:n("interval"),end:n("end"),ago:n("ago")}),MT.name[MT.times[t].name]=t},MT.working=function(t){var e=MT.times[t],n=e.target,o=(e.name,e.ago?Number(e.ago):e.time),r=e.way,a=e.show,i=(e.start,e.complete),M=e.interval,T=e.end,u=e.ago,m=Math.floor(o/60/60),c=Math.floor(o%3600/60),s=o%3600%60,f="";if(u&&(r="up"),null!==T?r=o<(T=Number(T))?"up":"down":null===T&&r?"up"===r?T=o+5:"down"===r&&(T=0):null!==T||r||(0===o?(r="up",T=o+5,e.way=r):(r="down",T=0,e.way=r)),"up"===r)o<T?(o+=1,M&&(l=new Function(["_MT","TIME"],M))(e,{hour:m,minute:c,second:s})):(MT.destroy(t),i&&(l=new Function(["_MT","TIME"],i))(e,{hour:m,minute:c,second:s}));else if("down"===r)if(o>T)o-=1,M&&(l=new Function(["_MT","TIME"],M))(e,{hour:m,minute:c,second:s});else if(MT.destroy(t),i){var l=new Function(["_MT","TIME"],i);l(e,{hour:m,minute:c,second:s})}if(u)return f=m>=8064?Math.floor(m/8064):m>=672?Math.floor(m/672):m>=168?Math.floor(m/168):m>=24?Math.floor(m/24):m<24&&m>0?m:c>=1?c:s,n.innerHTML=MT.conf.format.MTformat(f,MT.conf.second,MT.conf.ago),n.value=MT.conf.format.MTformat(f,MT.conf.second,MT.conf.ago),e.ago?e.ago=o:e.time=o,MT.working;if(a){var g=a.split(":").map(function(t){return"MT.pad("+t+")"}).join("+':'+");f=new Function("h, m, s","return "+g)(m,c,s)}else f=MT.pad(m)+":"+MT.pad(c)+":"+MT.pad(s);return n.innerHTML=f,n.value=f,e.time=o,MT.working},MT.pad=function(t){return("0"+t).substr(-2)},MT.build=function(t){for(MT.targets=t||MT.targets,z=0;z<MT.targets.length;z+=1)MT.collect(z);for(i=0;i<MT.times.length;i+=1){var e=MT.times[i];e.start&&new Function(["_MT","TIME"],e.start)(e,{hour:Math.floor(e.time/60/60),minute:Math.floor(e.time%3600/60),second:e.time%3600%60}),MT.start[i]=MT.working(i),MT.work[i]=setInterval(function(t){return function(){MT.start[t](t)}}(i),1e3);for(var n in e.target.attributes){var o=e.target.attributes[n];o&&o.name&&o.name.match(/mt\-/)&&e.target.removeAttribute(o.name)}}},MT.destroy=function(t,e){if("string"==typeof t?clearInterval(MT.work[MT.name[t]]):clearInterval(MT.work[t]),e){var n=MT.times[MT.name[t]];n.complete&&new Function(["_MT","TIME"],n.complete)(n,{hour:Math.floor(n.time/60/60),minute:Math.floor(n.time%3600/60),second:n.time%3600%60})}},MT.conf={second:"second",minute:"minute",hour:"hour",day:"day",week:"week",month:"month",year:"year",ago:"ago",format:"{t} {k} {a}"},MT.configure=function(t){Object.assign(MT.conf,t)};
