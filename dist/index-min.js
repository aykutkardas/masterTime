var MasterTime=function(){function t(){var t=[],e={fullDateRegex:/([\d]{2}\.[\d]{2}\.[\d]{4})\ ([\d]{2}\:[\d]{2}\:[\d]{2})/,dateRegex:/([\d]{2}\.[\d]{2}\.[\d]{4})/,timeRegex:/([\d]{2}\:[\d]{2}\:[\d]{2})/},r={mtDate:null,mtStart:null,mtEnd:null,mtOnStart:null,mtOnInterval:null,mtOnEnd:null,mtName:null,mtTemplate:null,mtWay:null,mtAgo:null,mtTarget:null};this.getRegex=function(){return e},this.getScheme=function(){return r},this.getStorage=function(){return t},this.setStorage=function(e){t[e]=[]}}return t.prototype.dateCompletion=function(t){var e=this.getRegex().fullDateRegex.exec(t);if(e)return e[0];var r=this.getRegex().dateRegex.exec(t);if(r)return r[0]+" 00:00:00";var n=this.getRegex().timeRegex.exec(t);return!!n&&(new Date).toLocaleDateString()+" "+n[0]},t.prototype.dateFormatTransform=function(t){if(!this.getRegex().fullDateRegex.exec(t))return!1;var e,r=t.split(" ");return r[1]||(r[1]=""),e=r[0].split("."),["January","February","March","April","May","June","July","August","September","October","November","December"][Number(e[1])-1]+" "+e[0]+", "+e[2]+" "+r[1]},t.prototype.getTimeDiff=function(t,e){return!!t&&new Date(t).getTime()-(e?new Date(e).getTime():(new Date).getTime())},t.prototype.msToCustom=function(t,e){if(!t)return!1;var r,n,a={Y:31556926e3,M:2629743830,W:6048e5,D:864e5,h:36e5,m:6e4,s:1e3,u:1};r=e?e.split(":"):["Y","M","W","D","h","m","s","u"];var i={};for(n in a)"u"===n&&r.indexOf(n)>-1?i[n]=Math.floor(t):r.indexOf(n)>-1&&(i[n]=Math.floor(t/a[n]),t%=a[n]);return i},t.prototype.dateIsGreater=function(t,e){if(!t||!e)return!1;var r=this.dateFormatTransform(t);if("string"!=typeof r)return!1;var n=this.dateFormatTransform(e);if("string"!=typeof n)return!1;new Date(r).getTime(),new Date(n).getTime();return t>e},t.prototype.dateIsLess=function(t,e){if(!t||!e)return!1;var r=this.dateFormatTransform(t);if("string"!=typeof r)return!1;var n=this.dateFormatTransform(e);if("string"!=typeof n)return!1;new Date(r).getTime(),new Date(n).getTime();return t<e},t.prototype.dateIsEqual=function(t,e){if(!t||!e)return!1;var r=this.dateFormatTransform(t);if("string"!=typeof r)return!1;var n=this.dateFormatTransform(e);if("string"!=typeof n)return!1;new Date(r).getTime(),new Date(n).getTime();return t===e},t.prototype.leftPad=function(t,e){if(!e)return t;var r;r=!0===e?["Y","M","W","D","h","m","s","u"]:e.split(":");var n,a={};for(n in t)r.indexOf(n)>-1&&(a[n]=parseInt(t[n])<10?"0"+t[n]:t[n]);return Object.assign(t,a),t},t.prototype.templateApply=function(t,e,r){if(!t)return!1;var n,a,i,o;for(n in r&&r.leftPad&&(e=this.leftPad(e,r.leftPad)),e)t=(o=new RegExp("[^\\/&^\\[]{0}\\[([^\\&^\\[&^\\]]*)\\{(.)\\}([^\\[]*)[^\\/]\\]".replace(".",n),"gmi")).exec(t)?parseInt(e[n])?t.replace(o,"$1"+e[n]+"$3"):t.replace(o,""):(a=new RegExp("\\/(\\[[^\\!&^\\[&^\\]]*)\\{(.)\\}([^\\[&^\\]]*)\\/(\\])".replace(".",n),"gmi")).exec(t)?t.replace(a,"$1"+e[n]+"$3$4"):(i=new RegExp("\\/\\[(\\[[^\\[&^\\]]*)\\{(.)\\}([^\\[&^\\]]*)\\/(\\])\\]".replace(".",n),"gmi")).exec(t)?parseInt(e[n])?t.replace(i,"$1"+e[n]+"$3$4"):t.replace(i,""):t.replace("{"+n+"}",e[n]);return t},t.prototype.htmlSelect=function(t){if(!t||!t.tagName)return!1;var e,r=Object.assign({},this.getScheme());for(e in r)r[e]=t.getAttribute(e),t.removeAttribute(e);return r.mtTarget=t,this.htmlSelectFormatter(r)},t.prototype.htmlSelectFormatter=function(t){var e=Object.assign({},this.getScheme());return e.mtDate=t.mtDate,e.mtName=t.mtName,e.mtTemplate=t.mtTemplate,e.mtWay=t.mtWay,e.mtTarget=t.mtTarget,t.mtStart&&(e.mtStart=parseInt(t.mtStart)),t.mtEnd&&(e.mtEnd=parseInt(t.mtEnd)),t.mtOnStart&&(e.mtOnStart=new Function("$MT",t.mtOnStart)),t.mtOnInterval&&(e.mtOnInterval=new Function("$MT",t.mtOnInterval)),t.mtOnEnd&&(e.mtOnEnd=new Function(t.mtOnEnd)),e.mtAgo=Boolean(t.mtEnd),e},t.prototype.mtWayCalc=function(t){if(!t||"object"!=typeof t)return!1;if(t.mtStart)t.mtEnd?t.mtStart>t.mtEnd?t.mtWay="down":t.mtStart<t.mtEnd?t.mtWay="up":t.mtWay=t.mtStart>0?"down":"up":t.mtWay||(t.mtEnd=t.mtStart>0?0:1/0,t.mtWay=t.mtStart>0?"down":"up");else if(t.mtEnd)t.mtStart=0,t.mtWay=t.mtEnd>0?"up":"down";else if(t.mtDate){var e=this.dateCompletion(t.mtDate),r=void 0;"string"==typeof e&&"string"==typeof(e=this.dateFormatTransform(e))&&"number"==typeof(r=this.getTimeDiff(e))&&(r/=1e3),r>0?(t.mtStart=r,t.mtWay="down"):(t.mtStart=-r,t.mtWay="up")}return t},t.prototype.addTimer=function(t){if(!t)return!1;var e=this.storage.length;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var a=Object.assign({},this.getScheme(),t[r]);(i=this.mtWayCalc(a))&&"boolean"!=typeof i&&this.storage[e].push(i),console.log(i)}else{var i;a=Object.assign({},this.getScheme(),t);(i=this.mtWayCalc(a))&&"boolean"!=typeof i&&this.storage[e].push(i),console.log(i)}return e},t.prototype.machine=function(t,e){var r=this.storage[t][e];if(!r)return!1;if(r.mtStart===r.mtEnd)return!1;var n=this.msToCustom(1e3*r.mtStart,"h:m:s");if(n&&"object"==typeof n&&r.mtTarget&&r.mtTarget.tagName){var a=this.templateApply("{h}:{m}:{s}",n);a&&"string"==typeof a&&(r.mtTarget.innerHTML=a,r.mtTarget.value=a)}"up"===r.mtWay?r.mtStart++:r.mtStart--},t.prototype.build=function(t){if(!t||"string"!=typeof t)return!1;for(var e=document.querySelectorAll(t),r=[],n=0,a=e.length;n<a;n++)r.push(e[n]);for(var i=0,o=r.length,m=[];i<o;i++){var u=this.htmlSelect(r[i]);u&&"object"==typeof u&&m.push(u)}return this.activeGroupIndex=this.addTimer(m),this},t.prototype.add=function(t){if(!t)return!1;for(var e,r=0,n=(e=document.querySelectorAll(t.mtTarget)).length,a=[];r<n;r++)t.target=e[r],a.push(t);return this.activeGroupIndex=this.addTimer(a),this},t.prototype.run=function(){var t=this;if("boolean"==typeof this.activeGroupIndex)return!1;for(var e=this.storage[this.activeGroupIndex],r=this.activeGroupIndex,n=0,a=e.length,i=function(){var a=n;e[a],o.machine(r,a),setInterval(function(){t.machine(r,a)},1e3)},o=this;n<a;n++)i();this.activeGroupIndex=!1},t}();